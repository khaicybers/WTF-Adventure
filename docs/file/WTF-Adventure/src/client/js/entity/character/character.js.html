<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../../../../">
  <title data-ice="title">WTF-Adventure/src/client/js/entity/character/character.js | WTF Adventure</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="documentation for your wtf needs"><meta property="og:type" content="website"><meta property="og:url" content="http://design1online.com"><meta property="og:site_name" content="WTF Adventure"><meta property="og:title" content="WTF Adventure"><meta property="og:image" content="http://design1online.com/logo.png"><meta property="og:description" content="documentation for your wtf needs"><meta property="og:author" content="https://design1online.com"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="WTF Adventure"><meta property="twitter:description" content="documentation for your wtf needs"><meta property="twitter:image" content="http://design1online.com/logo.png"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.png" style="width:34px;"></a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/khaicybers/WTF-Adventure"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js">src/client/js</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/app.js~App.html">App</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/game.js~Game.html">Game</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/main.js~WTF.html">WTF</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-controllers">src/client/js/controllers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/audio.js~Audio.html">Audio</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/bubble.js~Bubble.html">Bubble</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/chat.js~Chat.html">Chat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/entities.js~Entities.html">Entities</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/info.js~Info.html">Info</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/input.js~Input.html">Input</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/interface.js~Interface.html">Interface</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/overlay.js~Overlay.html">Overlay</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/pickcharacter.js~PickCharacter.html">PickCharacter</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/pointer.js~Cursor.html">Cursor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/sprites.js~Sprites.html">Sprites</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/controllers/zoning.js~Zone.html">Zone</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-entity">src/client/js/entity</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/animation.js~Animation.html">Animation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/entity.js~Entity.html">Entity</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/entityhandler.js~EntityHandler.html">EntityHandler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/sprite.js~Sprite.html">Sprite</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-entity-character">src/client/js/entity/character</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/character.js~Character.html">Character</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-entity-character-mob">src/client/js/entity/character/mob</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/mob/mob.js~Mob.html">Mob</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-entity-character-npc">src/client/js/entity/character/npc</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/npc/npc.js~Npc.html">Npc</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-entity-character-player">src/client/js/entity/character/player</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/player/player.js~Player.html">Player</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/player/playerhandler.js~PlayerHandler.html">PlayerHandler</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-entity-character-player-equipment">src/client/js/entity/character/player/equipment</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/player/equipment/armour.js~Armour.html">Armour</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/player/equipment/boots.js~Boots.html">Boots</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/player/equipment/equipment.js~Equipment.html">Equipment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/player/equipment/pendant.js~Pendant.html">Pendant</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/player/equipment/ring.js~Ring.html">Ring</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/character/player/equipment/weapon.js~Weapon.html">Weapon</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-entity-objects">src/client/js/entity/objects</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/objects/chest.js~Chest.html">Chest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/objects/item.js~Item.html">Item</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/entity/objects/projectile.js~Projectile.html">Projectile</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-interface">src/client/js/interface</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/abilities.js~Abilities.html">Abilities</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/actions.js~Actions.html">Actions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/bank.js~Bank.html">Bank</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/enchant.js~Enchant.html">Enchant</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/inventory.js~Inventory.html">Inventory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/warp.js~Warp.html">Warp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-interface-container">src/client/js/interface/container</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/container/container.js~Container.html">Container</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/container/slot.js~Slot.html">Slot</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-interface-profile">src/client/js/interface/profile</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/profile/page.js~Page.html">Page</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/profile/profile.js~Profile.html">Profile</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-interface-profile-pages">src/client/js/interface/profile/pages</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/profile/pages/ability.js~Ability.html">Ability</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/profile/pages/quest.js~Quest.html">Quest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/profile/pages/settings.js~Settings.html">Settings</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/interface/profile/pages/state.js~State.html">State</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-lib">src/client/js/lib</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/lib/log.js~Logger.html">Logger</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-logger">logger</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-map">src/client/js/map</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/map/map.js~Map.html">Map</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-network">src/client/js/network</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/network/messages.js~Messages.html">Messages</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/network/socket.js~Socket.html">Socket</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Packets">Packets</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-renderer">src/client/js/renderer</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/renderer/camera.js~Camera.html">Camera</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/renderer/grids.js~Grids.html">Grids</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/renderer/renderer.js~Renderer.html">Renderer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/renderer/tile.js~Tile.html">Tile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/renderer/updater.js~Updater.html">Updater</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-renderer-bubbles">src/client/js/renderer/bubbles</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/renderer/bubbles/blob.js~Blob.html">Blob</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-renderer-infos">src/client/js/renderer/infos</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/renderer/infos/splat.js~Splat.html">Splat</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-renderer-pointers">src/client/js/renderer/pointers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/renderer/pointers/pointer.js~Pointer.html">Pointer</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-client-js-utils">src/client/js/utils</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/utils/pathfinder.js~Pathfinder.html">Pathfinder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/utils/queue.js~Queue.html">Queue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/utils/storage.js~Storage.html">Storage</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/utils/timer.js~Timer.html">Timer</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/client/js/utils/transition.js~Transition.html">Transition</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isInt">isInt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-isIntersecting">isIntersecting</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-Modules">Modules</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-TRANSITIONEND">TRANSITIONEND</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-requestAnimFrame">requestAnimFrame</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-data-combat">src/server/data/combat</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/data/combat/greatsquid.js~GreatSquid.html">GreatSquid</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/data/combat/ogrelord.js~OgreLord.html">OgreLord</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/data/combat/piratecaptain.js~PirateCaptain.html">PirateCaptain</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/data/combat/queenant.js~QueenAnt.html">QueenAnt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/data/combat/skeletonking.js~SkeletonKing.html">SkeletonKing</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/data/combat/tenebris.js~Tenebris.html">Tenebris</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-data-items">src/server/data/items</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/data/items/healthFlask.js~Flask.html">Flask</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-controllers">src/server/js/controllers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/controllers/commands.js~Commands.html">Commands</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/controllers/incoming.js~Incoming.html">Incoming</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/controllers/minigames.js~Minigames.html">Minigames</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/controllers/quests.js~Quests.html">Quests</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/controllers/shops.js~Shops.html">Shops</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-database">src/server/js/database</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/database/creator.js~Creator.html">Creator</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/database/loader.js~Loader.html">Loader</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/database/mysql.js~MySQL.html">MySQL</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game">src/server/js/game</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/world.js~World.html">World</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity">src/server/js/game/entity</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/entity.js~Entity.html">Entity</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character">src/server/js/game/entity/character</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/character.js~Character.html">Character</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-combat">src/server/js/game/entity/character/combat</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/combat/combat.js~Combat.html">Combat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/combat/combatqueue.js~CombatQueue.html">CombatQueue</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/combat/hit.js~Hit.html">Hit</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-mob">src/server/js/game/entity/character/mob</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/mob/mob.js~Mob.html">Mob</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player">src/server/js/game/entity/character/player</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/achievement.js~Achievement.html">Achievement</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/checkpoint.js~Checkpoint.html">Checkpoint</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/guild.js~Guild.html">Guild</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/handler.js~Handler.html">Handler</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/player.js~Player.html">Player</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/trade.js~Trade.html">Trade</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/warp.js~Warp.html">Warp</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-ability">src/server/js/game/entity/character/player/ability</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/ability/abilities.js~Abilities.html">Abilities</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-ability-misc">src/server/js/game/entity/character/player/ability/misc</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/ability/misc/ability.js~Ability.html">Ability</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/ability/misc/firestrike.js~FireStrike.html">FireStrike</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/ability/misc/iceattack.js~IceAttack.html">IceAttack</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/ability/misc/run.js~Run.html">Run</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-containers">src/server/js/game/entity/character/player/containers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/containers/container.js~Container.html">Container</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/containers/slot.js~Slot.html">Slot</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-containers-bank">src/server/js/game/entity/character/player/containers/bank</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/containers/bank/bank.js~Slot.html">Slot</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-containers-inventory">src/server/js/game/entity/character/player/containers/inventory</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/containers/inventory/inventory.js~Inventory.html">Inventory</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-enchant">src/server/js/game/entity/character/player/enchant</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/enchant/enchant.js~Enchant.html">Enchant</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-equipment">src/server/js/game/entity/character/player/equipment</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/equipment/armour.js~Armour.html">Armour</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/equipment/boots.js~Boots.html">Boots</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/equipment/equipment.js~Equipment.html">Equipment</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/equipment/pendant.js~Pendant.html">Pendant</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/equipment/ring.js~Ring.html">Ring</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/equipment/weapon.js~Weapon.html">Weapon</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-points">src/server/js/game/entity/character/player/points</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/points/hitpoints.js~HitPoints.html">HitPoints</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/points/mana.js~Mana.html">Mana</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/points/points.js~Points.html">Points</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-profession">src/server/js/game/entity/character/player/profession</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/profession/profession.js~Profession.html">Profession</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-profession-impl">src/server/js/game/entity/character/player/profession/impl</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/profession/impl/foresting.js~Foresting.html">Foresting</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-quest">src/server/js/game/entity/character/player/quest</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/quest/quest.js~Quest.html">Quest</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-character-player-quest-misc">src/server/js/game/entity/character/player/quest/misc</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/quest/misc/bulkysituation.js~BulkySituation.html">BulkySituation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/quest/misc/introduction.js~Introduction.html">Introduction</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/character/player/quest/misc/thelie.js~TheLie.html">TheLie</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-npc">src/server/js/game/entity/npc</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/npc/npc.js~NPC.html">NPC</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-game-entity-objects">src/server/js/game/entity/objects</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/objects/chest.js~Chest.html">Chest</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/objects/item.js~Item.html">Item</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/game/entity/objects/projectile.js~Projectile.html">Projectile</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-map">src/server/js/map</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/map/area.js~Area.html">Area</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/map/grids.js~Grids.html">Grids</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/map/groups.js~Groups.html">Groups</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/map/map.js~Map.html">Map</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-map-areas">src/server/js/map/areas</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/map/areas/chestareas.js~ChestAreas.html">ChestAreas</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/map/areas/musicareas.js~MusicAreas.html">MusicAreas</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/map/areas/pvpareas.js~PVPAreas.html">PVPAreas</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-minigames">src/server/js/minigames</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/minigames/minigame.js~Minigame.html">Minigame</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-minigames-impl">src/server/js/minigames/impl</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/minigames/impl/teamwar.js~TeamWar.html">TeamWar</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-network">src/server/js/network</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/network/socket.js~Socket.html">Socket</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-server-js-util">src/server/js/util</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/server/js/util/parser.js~Parser.html">Parser</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-requireItems">requireItems</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-AbilityDictionary">AbilityDictionary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ItemsDictionary">ItemsDictionary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-MobsDictionary">MobsDictionary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-NpcsDictionary">NpcsDictionary</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ShopsDictionary">ShopsDictionary</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-tools-api">src/tools/api</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/tools/api/registrar.js~Registrar.html">Registrar</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-tools-bot">src/tools/bot</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/WTF-Adventure/src/tools/bot/bot.js~Bot.html">Bot</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#src-tools-map">src/tools/map</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parse">parse</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">WTF-Adventure/src/client/js/entity/character/character.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import _ from &apos;underscore&apos;;
import Entity from &apos;../entity&apos;;
import Transition from &apos;../../utils/transition&apos;;
import Animation from &apos;../animation&apos;;
import Module from &apos;../../utils/modules&apos;;

/**
 * A specific type of {@link Entity}. The base class for a
 * {@link Mob} or {@link Npc} or {@link Player}
 * @class
 */
export default class Character extends Entity {
  /**
   * Default constructor
   * @param {Number} id the ID of the {@link Entity}
   * @param {String} kind the kind of {@link Entity} this is (sprite name)
   * @param {String} label the name to display for the overlay
   */
  constructor(id, kind, label) {
    super(id, kind, label);

    /**
     * Next grid X position
     * @type {Number}
     */
    this.nextGridX = -1;

    /**
     * Next grid Y position
     * @type {Number}
     */
    this.nextGridY = -1;

    /**
     * Previous gridX position
     * @type {Number}
     */
    this.prevGridX = -1;

    /**
     * Previous gridY position
     * @type {Number}
     */
    this.prevGridY = -1;

    /**
     * The direction they are pointing
     * @type {Orientation}
     */
    this.orientation = Module.Orientation.Down;

    /**
     * How many hit points they have left
     * @type {Number}
     */
    this.hitPoints = -1;

    /**
     * How many hit points they have total
     * @type {Number}
     */
    this.maxHitPoints = -1;

    /**
     * How much magic they have left
     * @type {Number}
     */
    this.mana = -1;

    /**
     * How much magic they have total
     * @type {Number}
     */
    this.maxMana = -1;

    /**
     * Is there health bar visible or not
     * @type {Boolean}
     */
    this.healthBarVisible = false;

    /**
     * Does their health reset after time is up
     * @type {Boolean}
     */
    this.healthBarTimeout = false;

    /**
     * Are they dead
     * @type {Boolean}
     */
    this.dead = false;

    /**
     * Are they following something
     * @type {Boolean}
     */
    this.following = false;

    /**
     * Are they attacking something
     * @type {Boolean}
     */
    this.attacking = false;

    /**
     * Should their action be interrupted
     * @type {Boolean}
     */
    this.interrupted = false;

    /**
     * Did they get a critical hit
     * @type {Boolean}
     */
    this.critical = false;

    /**
     * Are they frozen
     * @type {Boolean}
     */
    this.frozen = false;

    /**
     * Are they stunned
     * @type {Boolean}
     */
    this.stunned = false;

    /**
     * Did they explode
     * @type {Boolean}
     */
    this.explosion = false;

    /**
     * What is their current path
     * @type {Astar}
     */
    this.path = null;

    /**
     * What is their current target
     * @type {Entity}
     */
    this.target = null;

    /**
     * An array of things trying to attack them
     * @type {Object}
     */
    this.attackers = {};

    /**
     * Movement transitions
     * @type {Transition}
     */
    this.movement = new Transition();

    /**
     * Idle animation speed
     * @type {Number}
     */
    this.idleSpeed = 450;

    /**
     * Attack animation speed
     * @type {Number}
     */
    this.attackAnimationSpeed = 50;

    /**
     * Walk animation speed
     * @type {Number}
     */
    this.walkAnimationSpeed = 100;

    /**
     * Movement animation speed
     * @type {Number}
     */
    this.movementSpeed = 250;

    /**
     * Do they have a weapon
     * @type {Boolean}
     */
    this.weapon = false;

    /**
     * Do they have a shadow
     * @type {Boolean}
     */
    this.shadow = false;

    /**
     * What is their attack range
     * @type {Number}
     */
    this.attackRange = 1;

    /**
     * Flip the sprite along the X axis
     * @type {Boolean}
     */
    this.spriteFlipX = false;

    /**
     * Flip the sprite along the Y axis
     * @type {Boolean}
     */
    this.spriteFlipY = false;

    /**
     * Location of a new destination during pathing
     * @type {Object}
     */
    this.newDestination = null;

    /**
     * Default step number
     * @type {Number}
     */
    this.step = 0;

    /**
     * Object of adjacent tiles while pathing
     * @type {Object}
     */
    this.adjacentTiles = {};

    /**
     * The X and Y locations of the destination
     * @type {{ gridX: Number, gridY: Number}}
     */
    this.destination = {};

    /**
     * If this character is in terror
     * @type {Boolean}
     */
    this.terror = false;

    /**
     * If this character&apos;s pathing is being forced
     * @type {Boolean}
     */
    this.forced = false;

    /**
     * Request path callback
     * @type {Function}
     */
    this.requestPathCallback = null;

    /**
     * Start pathing callback
     * @type {Function}
     */
    this.startPathingCallback = null;

    /**
     * Stop pathing callback
     * @type {Function}
     */
    this.stopPathingCallback = null;

    /**
     * Before step callback
     * @type {Function}
     */
    this.beforeStepCallback = null;

    /**
     * Step callback
     * @type {Function}
     */
    this.stepCallback = null;

    /**
     * Second step callback
     * @type {Function}
     */
    this.secondStepCallback = null;

    /**
     * Move callback
     * @type {Function}
     */
    this.moveCallback = null;

    /**
     * Hit points callback
     * @type {Function}
     */
    this.hitPointsCallback = null;

    /**
     * Global critical animation
     * @type {Animation}
     */
    this.criticalAnimation = null;

    /**
     * Global terror animation
     * @type {Animation}
     */
    this.terrorAnimation = null;

    /**
     * Global stun animation
     * @type {Animation}
     */
    this.stunAnimation = null;

    /**
     * Global explosion animation
     * @type {Animation}
     */
    this.explosionAnimation = null;

    // prep this character by loading global animations
    this.loadGlobals();
  }

  /**
   * Load all global character animations
   */
  loadGlobals() {
    this.criticalAnimation = new Animation(&apos;atk_down&apos;, 10, 0, 48, 48);
    this.criticalAnimation.setSpeed(30);

    this.criticalAnimation.setCount(1, () =&gt; {
      this.critical = false;

      this.criticalAnimation.reset();
      this.criticalAnimation.count = 1;
    });

    this.terrorAnimation = new Animation(&apos;explosion&apos;, 8, 0, 64, 64);
    this.terrorAnimation.setSpeed(50);

    this.terrorAnimation.setCount(1, () =&gt; {
      this.terror = false;

      this.terrorAnimation.reset();
      this.terrorAnimation.count = 1;
    });

    this.stunAnimation = new Animation(&apos;atk_down&apos;, 6, 0, 48, 48);
    this.stunAnimation.setSpeed(30);

    this.explosionAnimation = new Animation(&apos;explosion&apos;, 8, 0, 64, 64);
    this.explosionAnimation.setSpeed(50);

    this.explosionAnimation.setCount(1, () =&gt; {
      this.explosion = false;

      this.explosionAnimation.reset();
      this.explosionAnimation.count = 1;
    });
  }

  /**
   * Animate the character depending on their current orientation
   * @param {String} animation orientation (atk, walk, or idle)
   * @param {Number} speed how fast to animate in ms
   * @param {Number} count how many times to animate
   * @param {Function} onEndCount callback function once the animation count has ended
   * @return {Null|Void} returns null if the character is dead
   */
  animate(animation, speed, count, onEndCount) {
    const orientationOptions = [&apos;atk&apos;, &apos;walk&apos;, &apos;idle&apos;];
    let updatedPosition = null;

    if (this.currentAnimation &amp;&amp; this.currentAnimation.name === &apos;death&apos;) {
      return;
    }

    this.spriteFlipX = false;
    this.spriteFlipY = false;

    if (orientationOptions.indexOf(animation) &gt; -1) {
      const characterOrientation = this.orientation === Module.Orientation.Left
        ? &apos;right&apos;
        : Module.Orientation.toString(this.orientation);

      updatedPosition = `${animation}_${characterOrientation}`;
      this.spriteFlipX = this.orientation === Module.Orientation.Left;
    }

    this.setAnimation((updatedPosition || animation), speed, count, onEndCount);
  }

  /**
   * Look at a specific character
   * @param  {Character} character the character to look at
   */
  lookAt(character) {
    if (character.gridX &gt; this.gridX) {
      this.setOrientation(Module.Orientation.Right);
    } else if (character.gridX &lt; this.gridX) {
      this.setOrientation(Module.Orientation.Left);
    } else if (character.gridY &gt; this.gridY) {
      this.setOrientation(Module.Orientation.Down);
    } else if (character.gridY &lt; this.gridY) {
      this.setOrientation(Module.Orientation.Up);
    }

    this.idle();
  }

  /**
   * Follow a specific character
   * @param  {Character} character the character to follow
   */
  follow(character) {
    console.log(&apos;canvas follow&apos;, character);
    this.following = true;

    this.setTarget(character);
    this.move(character.gridX, character.gridY);
  }

  /**
   * Attack a specific character
   * @param  {Character} attacker  who is the one attacking (unused currently??)
   * @param  {Character} character the character that should be attacked and followed
   */
  attack(attacker, character) {
    this.attacking = true;
    // @TODO add an attacker? not sure why we&apos;re not doing this here but we do in addAttacker??
    // this.attackers[attacker.instance] = character;
    this.follow(character);
  }

  /**
   * Stop following or attacking another character
   */
  backOff() {
    this.attacking = false;
    this.following = false;

    this.removeTarget();
  }

  /**
   * Add an attacker to a character
   * @param {Character} character who is attacking them
   * @return {Boolean} false if they are already attacking this character
   */
  addAttacker(character) {
    if (this.hasAttacker(character)) {
      return false;
    }

    this.attackers[character.instance] = character;
    return true;
  }

  /**
   * Removes an attacker from a character
   * @param  {Character} character who should stop attacking them
   * @return {Boolean} true if deleted, false if not found
   */
  removeAttacker(character) {
    if (this.hasAttacker(character)) {
      return delete this.attackers[character.id];
    }

    return false;
  }

  /**
   * Check if they are already being attacked by this character
   * @param  {Character} character who to check if they are currently an attacker
   * @return {Boolean} false if not currently attacking this character
   */
  hasAttacker(character) {
    if (this.attackers.size === 0) {
      return false;
    }

    return character.instance in this.attackers;
  }

  /**
   * Set a specific animation action
   * @param  {Number} orientation an orientation {@link Modules}
   * @param  {Number} action an action {@link Modules}
   */
  performAction(orientation, action) {
    this.setOrientation(orientation);

    switch (action) {
      case Module.Actions.Idle:
        this.animate(&apos;idle&apos;, this.idleSpeed);
        break;

      case Module.Actions.Attack:
        this.animate(&apos;atk&apos;, this.attackAnimationSpeed, 1);
        break;

      case Module.Actions.Walk:
        this.animate(&apos;walk&apos;, this.walkAnimationSpeed);
        break;
      default:
        break;
    }
  }

  /**
   * Set the idle animation and optional orientation direction
   * @param  {Number} direction an orientation {@link Modules}
   */
  idle(direction) {
    const orientation = direction || this.orientation;

    this.performAction(orientation, Module.Actions.Idle);
  }

  /**
   * Go to a specific x,y value
   * @param  {Number}  x grid x coordinate
   * @param  {Number}  y grid y coordinate
   * @param  {Boolean} forced whether or not to force ths action
   * @return {Boolean} false if movement fails
   */
  go(x, y, forced) {
    if (this.frozen) {
      return false;
    }

    if (this.following) {
      this.following = false;
      this.target = null;
    }

    return this.move(x, y, forced);
  }

  /**
   * Set a new destination during movement somewhere
   * @param  {Number} x grid X coordinate
   * @param  {Number} y grid Y coordinate
   */
  proceed(x, y) {
    this.newDestination = {
      x,
      y,
    };
  }

  /**
   * We can have the movement remain client side because
   * the server side will be responsible for determining
   * whether or not the player should have reached the
   * location and ban all hackers. That and the fact
   * the movement speed is constantly updated to avoid
   * hacks previously present in BrowserQuest.
   * @return {Boolean} false if there is no more steps in the path
   */
  nextStep() {
    let stop = false;
    let path;

    if (this.step % 2 === 0 &amp;&amp; this.secondStepCallback) {
      this.secondStepCallback();
    }

    this.prevGridX = this.gridX;
    this.prevGridY = this.gridY;

    if (!this.hasPath()) {
      return false;
    }

    if (this.beforeStepCallback) {
      this.beforeStepCallback();
    }

    this.updateGridPosition();

    if (!this.interrupted) {
      if (this.hasNextStep()) {
        this.nextGridX = this.path[this.step + 1][0]; // eslint-disable-line
        this.nextGridY = this.path[this.step + 1][1]; // eslint-disable-line
      }

      if (this.stepCallback) {
        this.stepCallback();
      }

      // path has changed
      if (this.changedPath()) {
        const { x, y } = this.newDestination;

        path = this.requestPathfinding(x, y);

        if (!path) {
          return false;
        }

        this.newDestination = null;

        if (path.length &lt; 2) {
          stop = true;
        } else {
          this.followPath(path);
        }
      } else if (this.hasNextStep()) { // there is a next step available
        this.step += 1;
        this.updateMovement();
      } else { // stop movement
        stop = true;
      }
    } else { // not interrupted, stop movement
      stop = true;
      this.interrupted = false;
    }

    if (stop) { // stop pathing
      this.path = null;
      this.idle();

      if (this.stopPathingCallback) {
        this.stopPathingCallback(this.gridX, this.gridY, this.forced);
      }

      if (this.forced) {
        this.forced = false;
      }
    }

    return true;
  }

  /**
   * Update movement on the path
   */
  updateMovement() {
    const { step, path } = this;

    if (path[step][0] &lt; path[step - 1][0]) {
      this.performAction(Module.Orientation.Left, Module.Actions.Walk);
    }

    if (path[step][0] &gt; path[step - 1][0]) {
      this.performAction(Module.Orientation.Right, Module.Actions.Walk);
    }

    if (path[step][1] &lt; path[step - 1][1]) {
      this.performAction(Module.Orientation.Up, Module.Actions.Walk);
    }

    if (path[step][1] &gt; path[step - 1][1]) {
      this.performAction(Module.Orientation.Down, Module.Actions.Walk);
    }
  }

  /**
   * Taken from TTA - this is to ensure the player
   * does not click on himself or somehow into another
   * dimension
   * @param {Array} path the path the character is taking as they move
   * @return {Boolean} false if the path is too short or no next step
   */
  followPath(path) {
    if (!path || path.length &lt; 2) {
      return false;
    }

    this.path = path;
    this.step = 0;

    if (this.following) {
      path.pop();
    }

    if (this.startPathingCallback) {
      this.startPathingCallback(path);
    }

    return this.nextStep();
  }

  /**
   * Move the character to a new location
   * @param  {Number} x grid X coordinate
   * @param  {Number} y grid Y coordinate
   * @param  {Boolean} forced whether or not to force the movement
   */
  move(x, y, forced) {
    this.destination = {
      gridX: x,
      gridY: y,
    };

    this.adjacentTiles = {};

    if (this.hasPath() &amp;&amp; !forced) {
      this.proceed(x, y);
    } else {
      this.followPath(this.requestPathfinding(x, y));
    }
  }

  /**
   * Stop the character movement
   * @param  {Boolean} force force them to stop
   */
  stop(force) {
    if (!force) {
      this.interrupted = true;
    } else if (this.hasPath()) {
      this.path = null;
      this.newDestination = null;
      this.movement = new Transition();
      this.performAction(this.orientation, Module.Actions.Idle);
      this.nextGridX = this.gridX;
      this.nextGridY = this.gridY;
    }
  }

  /**
   * Get the correct effect animation
   * @return {String} animation name
   */
  getEffectAnimation() {
    if (this.critical) {
      return this.criticalAnimation;
    }

    if (this.stunned) {
      return this.stunAnimation;
    }

    if (this.terror) {
      return this.terrorAnimation;
    }

    if (this.explosion) {
      return this.explosionAnimation;
    }

    return null;
  }

  /**
   * Return the active effect on the character
   * @return {String} the effect in place on the character
   */
  getActiveEffect() {
    if (this.critical) {
      return &apos;criticaleffect&apos;;
    }

    if (this.stunned) {
      return &apos;stuneffect&apos;;
    }

    if (this.terror) {
      return &apos;explosion-terror&apos;;
    }

    if (this.explosion) {
      return &apos;explosion-fireball&apos;;
    }

    return null;
  }

  /**
   * The triggered health bar (currently fighting)
   */
  triggerHealthBar() {
    this.healthBarVisible = true;

    if (this.healthBarTimeout) {
      clearTimeout(this.healthBarTimeout);
    }

    this.healthBarTimeout = setTimeout(() =&gt; {
      this.healthBarVisible = false;
    }, 7000);
  }

  /**
   * Clear the health bar from the screen
   */
  clearHealthBar() {
    this.healthBarVisible = false;
    clearTimeout(this.healthBarTimeout);
    this.healthBarTimeout = null;
  }

  /**
   * Request path finding from current position to this position
   * @param  {Number} x grid X coordinate
   * @param  {Number} y grid Y coordinate
   * @return {Array} valid path or null
   */
  requestPathfinding(x, y) {
    if (this.requestPathCallback) {
      return this.requestPathCallback(x, y);
    }

    return null;
  }

  /**
   * Update the character&apos;s position on the grid
   */
  updateGridPosition() {
    this.setGridPosition(this.path[this.step][0], this.path[this.step][1]);
  }

  /**
   * Check if the character is currently moving
   * @return {Boolean} true if moving
   */
  isMoving() {
    return (
      this.currentAnimation.name === &apos;walk&apos;
      &amp;&amp; (this.x % 2 !== 0 || this.y % 2 !== 0)
    );
  }

  /**
   * Apply a callback to each attacker
   * @param  {Function} callback function to apply to each attacker
   */
  forEachAttacker(callback) {
    _.each(this.attackers, (attacker) =&gt; {
      callback(attacker);
    });
  }

  /**
   * Check if they are being attacked
   * @return {Boolean} returns true if they have any attackers
   */
  isAttacked() {
    return Object.keys(this.attackers).length &gt; 0;
  }

  /**
   * Returns true if they have a weapon
   * @return {Boolean}
   */
  hasWeapon() {
    return this.weapon;
  }

  /**
   * Returns true if they have a shadow
   * @return {Boolean}
   */
  hasShadow() {
    return this.shadow;
  }

  /**
   * Returns true if they are targeting someone
   * @return {Boolean}
   */
  hasTarget() {
    return !(this.target === null);
  }

  /**
   * Returns true if they have a path
   * @return {Boolean}
   */
  hasPath() {
    return this.path !== null;
  }

  /**
   * Returns true if they have a next path step
   * @return {Boolean}
   */
  hasNextStep() {
    return this.path.length - 1 &gt; this.step;
  }

  /**
   * Returns true if they&apos;ve changed paths
   * @return {[type]}
   */
  changedPath() {
    return !!this.newDestination;
  }

  /**
   * Returns true if the target was removed
   * @return {Boolean}
   */
  removeTarget() {
    if (!this.target) {
      return false;
    }

    this.target = null;
    return true;
  }

  /**
   * Removes all attakers
   */
  forget() {
    this.attackers = {};
  }

  /**
   * The character has moved, trigger the move callback if there is one
   */
  moved() {
    this.loadDirty();

    if (this.moveCallback) {
      this.moveCallback();
    }
  }

  /**
   * Sets a target for this character
   * @param {Character} target the character to target
   */
  setTarget(target) {
    console.log(&apos;canvas setting target&apos;, target);
    if (target === null) {
      this.removeTarget();
      return;
    }

    // they are already targeting this character
    if (this.target &amp;&amp; this.target.id === target.id) {
      console.log(&apos;canvas already has this target&apos;);
      return;
    }

    // remove any old targets
    if (this.hasTarget()) {
      console.log(&apos;canvas removing old target&apos;);
      this.removeTarget();
    }

    this.target = target;
  }

  /**
   * Set the character&apos;s hit points then triggers hitPointsCallback
   * @param {Number} hitPoints how many hit points they caused
   */
  setHitPoints(hitPoints) {
    this.hitPoints = hitPoints;

    if (this.hitPointsCallback) {
      this.hitPointsCallback(this.hitPoints);
    }
  }

  /**
   * Set the character&apos;s maximum hit points
   * @param {Number} maxHitPoints how much HP total
   */
  setMaxHitPoints(maxHitPoints) {
    this.maxHitPoints = maxHitPoints;
  }

  /**
   * Set the character&apos;s orientation
   * @param {String} orientation which direction {@link Modules}
   */
  setOrientation(orientation) {
    this.orientation = orientation;
  }

  /**
   * Callback for path requested
   * @param  {Function} callback
   */
  onRequestPath(callback) {
    this.requestPathCallback = callback;
  }

  /**
   * Start pathing callback
   * @param  {Function} callback
   */
  onStartPathing(callback) {
    this.startPathingCallback = callback;
  }

  /**
   * Stop pathing callback
   * @param  {Function} callback
   */
  onStopPathing(callback) {
    this.stopPathingCallback = callback;
  }

  /**
   * Before a pathing step callback
   * @param  {Function} callback
   */
  onBeforeStep(callback) {
    this.beforeStepCallback = callback;
  }

  /**
   * Pathing step callback
   * @param  {Function} callback
   */
  onStep(callback) {
    this.stepCallback = callback;
  }

  /**
   * Second step callback
   * @param  {Function} callback
   */
  onSecondStep(callback) {
    this.secondStepCallback = callback;
  }

  /**
   * On move callback
   * @param  {Function} callback
   */
  onMove(callback) {
    this.moveCallback = callback;
  }

  /**
   * On hit points callback
   * @param  {Function} callback
   */
  onHitPoints(callback) {
    this.hitPointsCallback = callback;
  }
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
